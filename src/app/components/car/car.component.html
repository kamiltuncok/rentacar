<div class="cars-page">

  <!-- Page Header + Filter Bar -->
  <div class="cars-header">
    <div>
      <span class="g-eyebrow">AraÃ§ KataloÄŸu</span>
      <h1 class="g-page-title">Arabalar</h1>
    </div>

    <div class="cars-toolbar">
      <!-- Dropdowns -->
      <div class="cars-dropdowns">
        <div class="dropdown-wrap">
          <label class="dropdown-label">Marka</label>
          <select class="filter-dropdown" [value]="selectedBrandId" (change)="onBrandChange($event)">
            <option [value]="0">TÃ¼m Markalar</option>
            <option *ngFor="let brand of brands" [value]="brand.brandId">{{ brand.brandName }}</option>
          </select>
        </div>
        <div class="dropdown-wrap">
          <label class="dropdown-label">Renk</label>
          <select class="filter-dropdown" [value]="selectedColorId" (change)="onColorChange($event)">
            <option [value]="0">TÃ¼m Renkler</option>
            <option *ngFor="let color of colors" [value]="color.colorId">{{ color.colorName }}</option>
          </select>
        </div>
        <div class="dropdown-wrap">
          <label class="dropdown-label">Åžehir</label>
          <select class="filter-dropdown" [value]="selectedCity" (change)="onCityChange($event)">
            <option value="">TÃ¼m Åžehirler</option>
            <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
          </select>
        </div>
        <button *ngIf="hasActiveFilter" class="btn-clear-filter" (click)="clearFilters()">
          âœ• Filtreleri Temizle
        </button>
      </div>

      <!-- Search -->
      <div class="cars-search">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="#64748b" stroke-width="2"
          stroke-linecap="round" stroke-linejoin="round">
          <circle cx="11" cy="11" r="8" />
          <path d="m21 21-4.35-4.35" />
        </svg>
        <input type="text" [(ngModel)]="filterText" class="cars-search__input" placeholder="Marka, aÃ§Ä±klama araâ€¦">
      </div>
    </div>
  </div>

  <!-- Active filter badge -->
  <div *ngIf="filterText" class="cars-filter-chip">
    <span>Â«{{ filterText }}Â» aramasÄ±</span>
    <button (click)="filterText=''">âœ•</button>
  </div>

  <!-- Result count -->
  <div *ngIf="dataLoaded" class="cars-result-count">
    {{ filteredCars.length }} araÃ§ bulundu
    <span *ngIf="totalPages > 1"> Â· Sayfa {{ currentPage }}/{{ totalPages }}</span>
  </div>

  <!-- Spinner -->
  <div *ngIf="dataLoaded==false" class="g-spinner-wrap">
    <div class="g-spinner"></div>
    <p class="g-spinner-text">AraÃ§lar yÃ¼kleniyorâ€¦</p>
  </div>

  <!-- Car Grid -->
  <div *ngIf="dataLoaded==true" class="car-grid">

    <!-- Empty state -->
    <div *ngIf="(pagedCars | filterPipe:filterText).length === 0" class="g-empty-state" style="grid-column:1/-1;">
      <div class="g-empty-state__icon">ðŸš—</div>
      <div class="g-empty-state__title">AraÃ§ bulunamadÄ±</div>
      <p class="g-empty-state__text">FarklÄ± bir filtre deneyin.</p>
    </div>

    <div class="car-card" *ngFor="let car of pagedCars | filterPipe:filterText">

      <!-- Car media -->
      <div class="car-card__media">
        <img src="assets/images/lux.jpg" [alt]="car.brandName">
        <span class="car-card__status-pill" [class.car-card__status-pill--rented]="car.returnDATE==null">
          {{ car.returnDATE != null ? 'MÃ¼sait' : 'Kirada' }}
        </span>
      </div>

      <!-- Car Body -->
      <div class="car-card__body">
        <div class="car-card__brand">{{ car.brandName }}</div>
        <div class="car-card__year">{{ car.modelYear }}</div>

        <dl class="car-card__specs">
          <div class="car-card__spec-row">
            <dt>Renk</dt>
            <dd>{{ car.colorName }}</dd>
          </div>
          <div class="car-card__spec-row">
            <dt>Lokasyon</dt>
            <dd>{{ car.locationName }}</dd>
          </div>
          <div class="car-card__spec-row">
            <dt>Åžehir</dt>
            <dd>{{ car.locationCity }}</dd>
          </div>
          <div class="car-card__spec-row">
            <dt>GÃ¼nlÃ¼k</dt>
            <dd class="car-card__price">{{ car.dailyPrice | currency:'TRY':'symbol':'1.0-0' }}</dd>
          </div>
        </dl>
      </div>

      <!-- Car Footer -->
      <div class="car-card__footer">
        <a [routerLink]="'carDetail/' + car.carId" class="btn-primary-solid">Detay</a>
      </div>
    </div>

  </div>

  <!-- Pagination -->
  <nav *ngIf="dataLoaded && totalPages > 1" class="pagination">
    <button class="pagination__btn" [disabled]="currentPage === 1" (click)="goToPage(currentPage - 1)">â€¹ Ã–nceki</button>
    <button *ngFor="let p of pageNumbers" class="pagination__num" [class.pagination__num--active]="p === currentPage"
      (click)="goToPage(p)">{{ p }}</button>
    <button class="pagination__btn" [disabled]="currentPage === totalPages" (click)="goToPage(currentPage + 1)">Sonraki
      â€º</button>
  </nav>
</div>