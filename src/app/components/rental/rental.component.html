<div class="container mt-4">
  <div class="row">
    <div class="col-12">
      <h2 class="mb-4">Kiralama Geçmişim</h2>

      <!-- Loading Spinner -->
      <div *ngIf="isLoading" class="text-center">
        <div class="spinner-border text-primary" role="status">
          <span class="sr-only">Yükleniyor...</span>
        </div>
        <p class="mt-2">Kiralama bilgileri yükleniyor...</p>
      </div>

      <!-- No Rentals Message -->
      <div *ngIf="!isLoading && rentals.length === 0" class="alert alert-info">
        <h4 class="alert-heading">Henüz kiralama yapmamışsınız</h4>
        <p class="mb-0">Araç kiraladığınızda burada görünecektir.</p>
      </div>

      <!-- Rentals List -->
      <div *ngIf="!isLoading && rentals.length > 0" class="row">
        <div class="col-md-6 col-lg-4 mb-4" *ngFor="let rental of rentals">
          <div class="card rental-card h-100">
            <!-- Resim -->
            <div class="card-img-container">
              <img 
                src="assets/images/lux.jpg" 
                class="card-img-top rental-image" 
                alt="{{ rental.brandName }}"
                (error)="setDefaultImage($event)"
              >
            </div>

            <div class="card-header bg-primary text-white">
              <div class="d-flex justify-content-between align-items-center">
                <h5 class="card-title mb-0">{{ rental.brandName }}</h5>
                <span [class]="'badge ' + getStatusClass(rental.isReturned)">
                  {{ getStatusText(rental.isReturned) }}
                </span>
              </div>
            </div>
            
            <div class="card-body">
              <div class="rental-info">
                <p><strong>Model:</strong> {{ rental.modelYear }} {{ rental.brandName }}</p>
                <p><strong>Renk:</strong> {{ rental.colorName }}</p>
                <p><strong>Segment:</strong> {{ rental.segmentName }}</p>
                <p><strong>Yakıt:</strong> {{ rental.fuelName }}</p>
                <p><strong>Vites:</strong> {{ rental.gearName }}</p>
                <p><strong>Günlük Ücret:</strong> {{ rental.dailyPrice | currency:'TRY':'symbol' }}</p>
                <p><strong>Depozito:</strong> {{ rental.deposit | currency:'TRY':'symbol' }}</p>
                <hr>
                <p><strong>Kiralama Tarihi:</strong> {{ formatDate(rental.rentDate) }}</p>
                <p *ngIf="rental.returnDate">
                  <strong>İade Tarihi:</strong> {{ formatDate(rental.returnDate) }}
                </p>
                <p>
                  <strong>Başlangıç Lokasyonu:</strong> 
                  <a [routerLink]="['/branches']" [queryParams]="{location: rental.startLocation}" class="location-link">
                    {{ rental.startLocation }}
                  </a>
                </p>
                <p>
                  <strong>Bitiş Lokasyonu:</strong> 
                  <a [routerLink]="['/branches']" [queryParams]="{location: rental.endLocation}" class="location-link">
                    {{ rental.endLocation }}
                  </a>
                </p>
              </div>
            </div>
            <div class="card-footer bg-light">
              <small class="text-muted">
                Kiralama ID: {{ rental.rentalId }} | Araç ID: {{ rental.carId }}
              </small>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>