<div class="rental-page">
  <div class="rental-inner">

    <!-- Page Header -->
    <div class="g-page-header">
      <span class="g-eyebrow">HesabÄ±m</span>
      <h1 class="g-page-title">Kiralama GeÃ§miÅŸim</h1>
      <p class="g-page-subtitle" *ngIf="!isLoading">{{ rentals.length }} kiralama kaydÄ±</p>
    </div>

    <!-- Spinner -->
    <div *ngIf="isLoading" class="g-spinner-wrap">
      <div class="g-spinner"></div>
      <p class="g-spinner-text">Kiralamalar yÃ¼kleniyorâ€¦</p>
    </div>

    <!-- Empty -->
    <div *ngIf="!isLoading && rentals.length === 0" class="g-empty-state">
      <div class="g-empty-state__icon">ðŸš—</div>
      <div class="g-empty-state__title">HenÃ¼z kiralama yapmamÄ±ÅŸsÄ±nÄ±z</div>
      <p class="g-empty-state__text">AraÃ§ kiraladÄ±ÄŸÄ±nÄ±zda burada gÃ¶rÃ¼necektir.</p>
    </div>

    <!-- Rental Cards -->
    <div *ngIf="!isLoading && rentals.length > 0" class="rental-grid">
      <div class="rental-card" *ngFor="let rental of rentals">

        <!-- Media -->
        <div class="rental-card__media">
          <img src="assets/images/lux.jpg" [alt]="rental.brandName" (error)="setDefaultImage($event)">
          <span class="rental-card__status-pill"
            [class.rental-card__status-pill--active]="rental.status === 1 || rental.status === 0"
            [class.rental-card__status-pill--completed]="rental.status === 2"
            [class.rental-card__status-pill--cancelled]="rental.status === 3">
            {{ rental.status === 1 ? 'Aktif' : rental.status === 0 ? 'Bekliyor' : rental.status === 2 ? 'TamamlandÄ±' :
            'Ä°ptal' }}
          </span>
        </div>

        <!-- Content -->
        <div class="rental-card__content">
          <div class="rental-card__brand">{{ rental.brandName }}</div>
          <div class="rental-card__meta">{{ rental.modelYear }} Â· {{ rental.colorName }} Â· {{ rental.segmentName }}
          </div>

          <dl class="rental-card__specs">
            <div class="rental-spec-row">
              <dt>Plaka</dt>
              <dd>{{ rental.plateNumber }}</dd>
            </div>
            <div class="rental-spec-row">
              <dt>YakÄ±t</dt>
              <dd>{{ rental.fuelName }}</dd>
            </div>
            <div class="rental-spec-row">
              <dt>Vites</dt>
              <dd>{{ rental.gearName }}</dd>
            </div>
            <div class="rental-spec-row">
              <dt>GÃ¼nlÃ¼k Fiyat</dt>
              <dd class="rental-price">{{ rental.rentedDailyPrice | currency:'TRY':'symbol':'1.0-0' }}</dd>
            </div>
            <div class="rental-spec-row">
              <dt>Toplam</dt>
              <dd class="rental-price rental-price--total">{{ rental.totalPrice | currency:'TRY':'symbol':'1.0-0' }}
              </dd>
            </div>
            <div class="rental-spec-row">
              <dt>Depozito</dt>
              <dd>{{ rental.depositAmount | currency:'TRY':'symbol':'1.0-0' }}
                <span class="deposit-status-badge deposit-status-badge--{{ rental.depositStatus }}">
                  {{ rental.depositStatus === 1 ? 'Bloke' : rental.depositStatus === 3 ? 'Ä°ade Edildi'
                  : rental.depositStatus === 2 ? 'Kesildi' : 'KÄ±smi Ä°ade' }}
                </span>
              </dd>
            </div>
            <div class="rental-spec-row rental-spec-row--divider">
              <dt>BaÅŸlangÄ±Ã§</dt>
              <dd>{{ formatDate(rental.startDate) }}</dd>
            </div>
            <div class="rental-spec-row">
              <dt>BitiÅŸ</dt>
              <dd>{{ formatDate(rental.endDate) }}</dd>
            </div>
            <div class="rental-spec-row">
              <dt>AlÄ±ÅŸ Yeri</dt>
              <dd>
                <a [routerLink]="['/branches']" [queryParams]="{location: rental.startLocationName}"
                  class="rental-location-link">
                  {{ rental.startLocationName }} â€“ {{ rental.startLocationCity }}
                </a>
              </dd>
            </div>
            <div class="rental-spec-row">
              <dt>Ä°ade Yeri</dt>
              <dd>
                <a [routerLink]="['/branches']" [queryParams]="{location: rental.endLocationName}"
                  class="rental-location-link">
                  {{ rental.endLocationName }} â€“ {{ rental.endLocationCity }}
                </a>
              </dd>
            </div>
            <div *ngIf="rental.depositRefundedDate" class="rental-spec-row">
              <dt>Depozito Ä°ade</dt>
              <dd>{{ formatDate(rental.depositRefundedDate) }}</dd>
            </div>
          </dl>
        </div>

        <!-- Footer -->
        <div class="rental-card__footer">
          <span class="rental-card__id">#{{ rental.id }} Â· AraÃ§ {{ rental.carId }}</span>
        </div>

      </div>
    </div>

  </div>
</div>