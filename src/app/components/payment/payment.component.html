<div class="container">
    <div class="row pt-4">
        <div class="container p-0" style="border: 1px solid black; padding: 0.5px; display: flex;">
            <!-- Left Side - Payment Information -->
            <div style="flex: 1;" *ngIf="isUserAuthenticated">
                <div class="card px-4" style="background-color: #cedce0;">
                    <h3>Ödeme Bilgileri</h3>
                    <hr style="border: 0.5px solid black;">
                    <div style="position: absolute; top: 0; right: 0; margin-top: 65px; margin-right: 10px;">
                        <img src="https://bertanuzun.com/wp-content/uploads/2020/03/kredi-karti.png" width="400"
                            height="250" alt="Kredi Kartı">
                    </div>
                    <div class="row gx-3" [formGroup]="paymentForm">
                        <div class="col-12">
                            <div class="d-flex flex-column">
                                <p class="text mb-1" style="height: 40px;">Kart İsmi</p>
                                <input formControlName="cardHolder" class="form-control mb-3" type="text"
                                    placeholder="Ad Soyad" style="height: 40px; width: 400px;"
                                    [class.is-invalid]="paymentForm.get('cardHolder')?.invalid && paymentForm.get('cardHolder')?.touched">
                            </div>
                        </div>
                        <div class="col-12">
                            <div class="d-flex flex-column">
                                <p class="text mb-1" style="height: 40px;">Kart Numarası</p>
                                <input formControlName="cardNumber" class="form-control mb-3" type="text"
                                    placeholder="1234 5678 9876 5432" maxlength="16" style="height: 40px; width: 400px;"
                                    [class.is-invalid]="paymentForm.get('cardNumber')?.invalid && paymentForm.get('cardNumber')?.touched">
                            </div>
                        </div>
                        <div class="col-2">
                            <div><label>Son Kullanma Tarihi</label>
                                <div class="last-usage-date d-flex gap-2">
                                    <div class="select-wrapper">
                                        <select formControlName="expireMonth" class="form-control"
                                            [class.is-invalid]="paymentForm.get('expireMonth')?.invalid && paymentForm.get('expireMonth')?.touched">
                                            <option value="" disabled selected>Ay</option>
                                            <option value="1">01</option>
                                            <option value="2">02</option>
                                            <option value="3">03</option>
                                            <option value="4">04</option>
                                            <option value="5">05</option>
                                            <option value="6">06</option>
                                            <option value="7">07</option>
                                            <option value="8">08</option>
                                            <option value="9">09</option>
                                            <option value="10">10</option>
                                            <option value="11">11</option>
                                            <option value="12">12</option>
                                        </select>
                                    </div>
                                    <div class="select-wrapper">
                                        <select formControlName="expireYear" class="form-control"
                                            [class.is-invalid]="paymentForm.get('expireYear')?.invalid && paymentForm.get('expireYear')?.touched">
                                            <option value="" disabled selected>Yıl</option>
                                            <option value="2025">2025</option>
                                            <option value="2026">2026</option>
                                            <option value="2027">2027</option>
                                            <option value="2028">2028</option>
                                            <option value="2029">2029</option>
                                            <option value="2030">2030</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="d-flex flex-column">
                                <p class="text mb-1 mt-3">CVV/CVC</p>
                                <input formControlName="cvv" class="form-control mb-3 pt-2" maxlength="3" type="text"
                                    placeholder="***" style="width: 100px;"
                                    [class.is-invalid]="paymentForm.get('cvv')?.invalid && paymentForm.get('cvv')?.touched">
                            </div>
                        </div>
                        <div class="mt-4 mb-4">
                            <button type="button" (click)="addRentalEntry()" class="btn btn-success btn-lg">
                                Hemen Kirala
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div *ngIf="!isUserAuthenticated" class="p-5 w-100">
                <h4 class="mb-4">Kiralamayı Tamamlamak İçin Bilgilerinizi Girin</h4>

                <!-- Individual Form -->
                <form *ngIf="customerType === 0" [formGroup]="guestIndividualForm" class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Ad</label>
                        <input type="text" formControlName="firstName" class="form-control" placeholder="Adınız">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Soyad</label>
                        <input type="text" formControlName="lastName" class="form-control" placeholder="Soyadınız">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">T.C. Kimlik No</label>
                        <input type="text" formControlName="identityNumber" class="form-control"
                            placeholder="11 Haneli TC No" maxlength="11">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">E-Posta</label>
                        <input type="email" formControlName="email" class="form-control"
                            placeholder="E-Posta Adresiniz">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Telefon Numarası</label>
                        <input type="text" formControlName="phoneNumber" class="form-control"
                            placeholder="Telefon Seçilmedi (05XX)">
                    </div>
                </form>

                <!-- Corporate Form -->
                <form *ngIf="customerType === 1" [formGroup]="guestCorporateForm" class="row g-3">
                    <div class="col-md-6">
                        <label class="form-label">Şirket Adı</label>
                        <input type="text" formControlName="companyName" class="form-control" placeholder="Şirket Adı">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Vergi Numarası</label>
                        <input type="text" formControlName="taxNumber" class="form-control" placeholder="Vergi No">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">Telefon Numarası</label>
                        <input type="text" formControlName="phoneNumber" class="form-control"
                            placeholder="Telefon Seçilmedi (05XX)">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">E-Posta</label>
                        <input type="email" formControlName="email" class="form-control" placeholder="Kurumsal E-Posta">
                    </div>
                </form>

                <!-- Payment Information for Guests -->
                <div class="mt-5" [formGroup]="paymentForm">
                    <h5 class="mb-3">Ödeme Bilgileri</h5>
                    <hr>
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label class="form-label">Kart İsmi</label>
                            <input type="text" formControlName="cardHolder" class="form-control" placeholder="Ad Soyad"
                                [class.is-invalid]="paymentForm.get('cardHolder')?.invalid && paymentForm.get('cardHolder')?.touched">
                        </div>
                        <div class="col-md-6">
                            <label class="form-label">Kart Numarası</label>
                            <input type="text" formControlName="cardNumber" class="form-control"
                                placeholder="1234 5678 9876 5432" maxlength="16"
                                [class.is-invalid]="paymentForm.get('cardNumber')?.invalid && paymentForm.get('cardNumber')?.touched">
                        </div>
                        <div class="col-md-4">
                            <label class="form-label">Son Kullanma Tarihi</label>
                            <div class="d-flex gap-2">
                                <select formControlName="expireMonth" class="form-control"
                                    [class.is-invalid]="paymentForm.get('expireMonth')?.invalid && paymentForm.get('expireMonth')?.touched">
                                    <option value="" disabled selected>Ay</option>
                                    <option *ngFor="let month of [1,2,3,4,5,6,7,8,9,10,11,12]" [value]="month">
                                        {{month | number:'2.0'}}
                                    </option>
                                </select>
                                <select formControlName="expireYear" class="form-control"
                                    [class.is-invalid]="paymentForm.get('expireYear')?.invalid && paymentForm.get('expireYear')?.touched">
                                    <option value="" disabled selected>Yıl</option>
                                    <option *ngFor="let year of [2025,2026,2027,2028,2029,2030]" [value]="year">
                                        {{year}}
                                    </option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <label class="form-label">CVV/CVC</label>
                            <input type="text" formControlName="cvv" class="form-control" maxlength="3"
                                placeholder="***"
                                [class.is-invalid]="paymentForm.get('cvv')?.invalid && paymentForm.get('cvv')?.touched">
                        </div>
                    </div>
                </div>

                <div class="row g-3 mt-4">
                    <div class="col-12 text-end">
                        <button type="button" (click)="addRentalEntry()" class="btn btn-success btn-lg">
                            Ödemeyi Tamamla
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>